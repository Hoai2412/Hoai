<UserControl x:Class="QuanLySinhVien.QuanLyDangKyHocPhan"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             mc:Ignorable="d"
             d:DesignHeight="600" d:DesignWidth="900"
             Background="#F9FAFB">

    <Grid Margin="25">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- HEADER -->
        <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
            <materialDesign:PackIcon Kind="BookClockOutline"
                                     Foreground="#1E3A8A"
                                     Width="28" Height="28"
                                     Margin="0,0,10,0"/>
            <TextBlock Text="QUẢN LÝ ĐĂNG KÝ HỌC PHẦN"
                       FontSize="22"
                       FontWeight="Bold"
                       Foreground="#1E3A8A"
                       VerticalAlignment="Center"/>
        </StackPanel>

        <!-- NỘI DUNG -->
        <Border Grid.Row="1"
                Background="White"
                CornerRadius="10"
                Padding="25"
                BorderBrush="#E2E8F0"
                BorderThickness="1">
            <StackPanel>

                <!-- CẤU HÌNH -->
                <TextBlock Text="Cấu hình đợt đăng ký học phần"
                           FontWeight="Bold"
                           FontSize="16"
                           Foreground="#1E3A8A"
                           Margin="0,0,0,10"/>

                <Grid Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Ngày bắt đầu -->
                    <StackPanel Margin="0,0,10,0">
                        <TextBlock Text="Ngày bắt đầu:" FontWeight="Bold" Margin="0,0,0,5"/>
                        <DatePicker x:Name="dpNgayBatDau"
                                    SelectedDate="{x:Static sys:DateTime.Now}"
                                    Height="32"/>
                    </StackPanel>

                    <!-- Ngày kết thúc -->
                    <StackPanel Grid.Column="1" Margin="10,0,0,0">
                        <TextBlock Text="Ngày kết thúc:" FontWeight="Bold" Margin="0,0,0,5"/>
                        <DatePicker x:Name="dpNgayKetThuc" Height="32"/>
                    </StackPanel>
                </Grid>

                <!-- Số tín chỉ & tiên quyết -->
                <Grid Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Margin="0,0,10,0">
                        <TextBlock Text="Số tín chỉ tối đa / kỳ:" FontWeight="Bold" Margin="0,0,0,5"/>
                        <TextBox x:Name="txtTinChiToiDa"
                                 Height="32"
                                 FontSize="14"
                                 BorderBrush="#CBD5E1"
                                 BorderThickness="1"
                                 Padding="8,0"
                                 VerticalContentAlignment="Center"
                                 Text="25" TextChanged="txtTinChiToiDa_TextChanged"/>
                    </StackPanel>

                    <StackPanel Grid.Column="1" Margin="10,0,0,0">
                        <TextBlock Text="Quy tắc môn tiên quyết:" FontWeight="Bold" Margin="0,0,0,5"/>
                        <TextBox x:Name="txtMonTienQuyet"
                                 Height="32"
                                 FontSize="14"
                                 BorderBrush="#CBD5E1"
                                 BorderThickness="1"
                                 Padding="8,0"
                                 VerticalContentAlignment="Center"
                                 Text="Phải hoàn thành các môn cơ sở trước khi học nâng cao" TextChanged="txtMonTienQuyet_TextChanged"/>
                    </StackPanel>
                </Grid>

                <!-- Nút thao tác -->
                <UniformGrid Columns="3" HorizontalAlignment="Center" Margin="0,0,0,20">
                    <Button Content="Mở đăng ký"
                            Width="150" Height="38"
                            Background="#2563EB"
                            Foreground="White"
                            FontWeight="Bold"
                            BorderThickness="0"
                            Margin="8,0" Click="Button_Click"/>
                    <Button Content="Đóng đăng ký"
                            Width="150" Height="38"
                            Background="#DC2626"
                            Foreground="White"
                            FontWeight="Bold"
                            BorderThickness="0"
                            Margin="8,0" Click="Button_Click_1"/>
                    <Button Content="Lưu cấu hình"
                            Width="150" Height="38"
                            Background="#F59E0B"
                            Foreground="White"
                            FontWeight="Bold"
                            BorderThickness="0"
                            Margin="8,0" Click="Button_Click_2"/>
                </UniformGrid>

                <!-- BẢNG -->
                <TextBlock Text="Danh sách đợt đăng ký học phần"
                           FontWeight="Bold"
                           FontSize="16"
                           Foreground="#1E3A8A"
                           Margin="0,0,0,10"/>

                <DataGrid x:Name="dgDotDangKy"
                          AutoGenerateColumns="False"
                          CanUserAddRows="False"
                          SelectionMode="Single"
                          AlternatingRowBackground="#F1F5F9"
                          RowHeight="38"
                          GridLinesVisibility="Horizontal"
                          BorderBrush="#E2E8F0"
                          BorderThickness="1"
                          Background="White"
                          Margin="0,0,0,15"
                          FontSize="14" SelectionChanged="dgDotDangKy_SelectionChanged">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Mã đợt" 
                        Binding="{Binding MaDot}" 
                        Width="*" />

                        <!-- ✅ Định dạng ngày dd/MM/yyyy -->
                        <DataGridTextColumn Header="Ngày bắt đầu" 
                        Binding="{Binding NgayBatDau, StringFormat={}{0:dd/MM/yyyy}}" 
                        Width="*" />

                        <DataGridTextColumn Header="Ngày kết thúc" 
                        Binding="{Binding NgayKetThuc, StringFormat={}{0:dd/MM/yyyy}}" 
                        Width="*" />

                        <DataGridTextColumn Header="Tín chỉ tối đa" 
                        Binding="{Binding TinChiToiDa}" 
                        Width="*" />

                        <DataGridTextColumn Header="Môn tiên quyết" 
                        Binding="{Binding MonTienQuyet}" 
                        Width="2*" />

                        <DataGridTextColumn Header="Trạng thái" 
                        Binding="{Binding TrangThai}" 
                        Width="*" />
                    </DataGrid.Columns>

                </DataGrid>

            </StackPanel>
        </Border>
    </Grid>
</UserControl>
